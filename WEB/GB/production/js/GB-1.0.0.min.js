/*! GB-1.0.0 2017-05-27 */
"use strict";!function(){angular.module("app",["app.core","app.layout","app.widgets"])}(),function(){angular.module("app").config(["$routeProvider","$locationProvider",function(a,b){a.when("/home",{templateUrl:"GB/app/layout/screens/home/home.tmpl.html",controller:"homeCtr",controllerAs:"vm"}).when("/billing",{templateUrl:"GB/app/layout/screens/billing/billing.tmpl.html",controller:"billingCtr",controllerAs:"vm"}).when("/login",{templateUrl:"GB/app/layout/screens/login/login.tmpl.html",controller:"loginCtr",controllerAs:"vm"}).when("/setting",{templateUrl:"GB/app/layout/screens/login/setting.tmpl.html",controller:"loginCtr",controllerAs:"vm"}).when("/review",{templateUrl:"GB/app/layout/screens/review/review.tmpl.html",controller:"reviewCtr",controllerAs:"vm"}).when("/error",{templateUrl:"GB/app/layout/screens/contactAdmin.tmpl.html"}).otherwise({redirectTo:"/login"})}]).config(["$httpProvider",function(a){a.defaults.headers.common={Accept:"application/json;charset=utf-8","Content-Type":"application/json; charset=utf-8"}}])}(),function(){angular.module("app.widgets",[])}(),function(){angular.module("app.core",["ngAnimate","ngRoute","ngSanitize","ui.bootstrap","ngCookies","ngTouch","ngMaterial","smart-table"])}(),function(){angular.module("app.layout",[])}(),function(){function a(a,b,c){function d(a,c,d){function e(c){var d=a.options;b.open({animation:d.animation,templateUrl:d.templateUrl,controller:["$scope","$document","$rootScope","$window","$uibModalInstance","config","$timeout",function(b,c,e,f,g,h,i){b.isShow=!0,b.modalData=a.modaldata,b.modalopt=d,b.image=e.image,b.typeImage=!1,b.typeVideo=!1,"image"===e.type&&(b.typeImage=!0);b.cancelModal=function(){g.dismiss("cancel")},b.$on("cancelModal",function(a,b){g.dismiss("cancel")}),b.$on("$locationChangeStart",function(a,b,c){g.dismiss("cancel")})}],size:d.size,resolve:{}})}var f=500,g=0,h=null;c.on("click",function(b){g++,1===g?h=setTimeout(function(){a.$apply(function(){e(b)}),g=0},f):(clearTimeout(h),g=0)})}var e={link:d,restrict:"A",scope:{modaldata:"=",options:"="}};return e}angular.module("app.widgets").directive("modelBox",a),a.$inject=["$q","$uibModal","$location"]}(),function(){function a(a,b,c){function d(a,b){return b&&(b.uid?a=a+"?uid="+b.uid:b.name&&(a=a+"?name="+b.name)),a}function e(b){var e="/stock/getOrders";return e=d(e,b),a.get(c.APIurl+e,b).then(y)}function f(b){var d="/login";return a.post(c.APIurl+d,b).then(y)}function g(b){var d="/changePassword";return a.post(c.APIurl+d,b).then(y)}function h(b){var d="/stock/setOrders";return a.post(c.APIurl+d,b).then(y)}function i(b){var d="/stock/createSupplier";return a.post(c.APIurl+d,b).then(y)}function j(b){var d="/billing/setSellOrder";return a.post(c.APIurl+d,b).then(y)}function k(b){var d="/stock/createBrands";return a.post(c.APIurl+d,b).then(y)}function l(b){var d="/stock/setModel";return a.post(c.APIurl+d,b).then(y)}function m(b){var d="/stock/updateOrder";return a.post(c.APIurl+d,b).then(y)}function n(b){var d="/billing/returnSellOrder";return a.post(c.APIurl+d,b).then(y)}function o(b){var d="/billing/updateSellOrder";return a.post(c.APIurl+d,b).then(y)}function p(b){var d="/stock/getSupplier";return a.get(c.APIurl+d,b).then(y)}function q(b){var d="/stock/getSupplierId";return a.get(c.APIurl+d,b).then(y)}function r(b){var d="/stock/getBrands";return a.get(c.APIurl+d,b).then(y)}function s(b){var d="/stock/getModels";return a.get(c.APIurl+d,b).then(y)}function t(b){var d="/stock/getModelById";return d=d+"?id="+b,a.get(c.APIurl+d,b).then(y)}function u(b){var d="/billing/getSellOrders";return a.get(c.APIurl+d,b).then(y)}function v(b){var d="/stock/deleteOrder";return d=d+"?id="+b,a.get(c.APIurl+d,b).then(y)}function w(b){var d="/getChartDetail";return a.get(c.APIurl+d,b).then(y)}function x(b){var d="/myexcel";return a.post(c.APIurl+d,b).then(y)}function y(a,b){return a}var z={login:f,getParamUrl:d,getOrders:e,createOrder:h,createSupplier:i,getSupplier:p,getSupplierId:q,getBrand:r,getModel:s,changeBrand:t,saveBrand:k,getSellOrders:u,setSellOrder:j,saveModel:l,updateStock:m,deleteStock:v,returnSellOrder:n,updateSellOrder:o,getChartDetail:w,generateExcel:x,changePwd:g};return z}angular.module("app.widgets").factory("authfactory",a),a.$inject=["$http","$q","config"]}(),function(){function a(a,b,c){function d(b){var d="http://ajax.googleapis.com/ajax/services/feed/load";return b.url=c.newsUrl,d=f(d,b),a.jsonp(d)}function e(b){var d="http://ajax.googleapis.com/ajax/services/feed/load";return b.url=c.blogsUrl,d=f(d,b),a.jsonp(d)}function f(a,b){return b&&(a+="?v=1.0",b.num&&(a=a+"&num="+b.num),a+="&callback=JSON_CALLBACK",a=a+"&q="+encodeURIComponent(b.url)),a}var g={getNews:d,getBlogs:e,getParamUrl:f};return g}angular.module("app.widgets").factory("Feeds",a),a.$inject=["$http","$q","config"]}(),function(){function a(a){function b(a){for(var b=document.cookie.split("; "),c=0;c<b.length;c++){var d=b[c].split("~=");if(a===d[0]){var e="";try{e=angular.fromJson(d[1])}catch(f){e=unescape(d[1])}return e}}return null}return function(a,c){if(1===arguments.length)return b(a);var d=a+"~=";if("object"==typeof c){var e="";if(d+="object"==typeof c.value?angular.toJson(c.value)+";":c.value+";",c.expires){var f=new Date;f.setTime(f.getTime()+24*c.expires*60*60*1e3),e=f.toGMTString()}d+=c.session?"":"expires="+e+";",d+=c.path?"path="+c.path+";":"",d+=c.secure?"secure;":""}else d+=c+";";document.cookie=d}}angular.module("app.widgets").factory("rememberFact",a),a.$inject=["$filter"]}(),function(){angular.module("app.core").constant("toastr",toastr).constant("moment",moment)}(),function(){function a(a){a.options.timeOut=4e3,a.options.positionClass="toast-bottom-right",a.options.tapToDismiss=!0}function b(a,b,c,d,e){}var c=angular.module("app.core");c.config(a),a.$inject=["toastr"];var d={appErrorPrefix:"[APP Error] ",appTitle:"GB",version:"1.0.0",APIurl:"http://localhost:9090"};c.value("config",d),c.run(b),b.$inject=["$rootScope","$location","config","$cookies","$window"]}(),function(){function a(a,b,c,d){function e(){}e()}angular.module("app.layout").controller("LayoutCtr",a),a.$inject=["$timeout","$filter","$q","config"]}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(){o.getSellOrders()}function k(){return n(),i.getSellOrders(p).then(function(a){200===a.status&&(a=a.data.databean,o.sellDetail=a,o.sellDetailList=a)},function(a){return!1})}function l(a){var b=a;return b.brand=b.brand.brandId,b.model=b.model.modelId,i.updateSellOrder(a).then(function(a){200===a.status&&toastr.success("Stock Added")},function(a){return!1})}function m(a){n(),"supplier"===a?o.getSupplier():"brand"===a?o.getBrand():"model"===a&&o.getModel()}function n(){p={}}var o=this,p={};o.itemsByPage=10,o.getSellOrders=k,o.paymentChange=l,o.selectTab=m,j()}angular.module("app.layout").controller("billingCtr",a),a.$inject=["$timeout","$filter","$q","config","$rootScope","$cookies","$scope","$location","authfactory"]}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(){}function k(){return q(),i.getOrders(s).then(function(a){200===a.status&&(a=a.data.databean,r.orderDetails=a,r.rowCollection=a)},function(a){return!1})}function l(){return q(),i.getSupplier(s).then(function(a){200===a.status&&(a=a.data.databean,r.supplierDetail=a,r.suppDetailCollection=a)},function(a){return!1})}function m(){return q(),i.getBrand(s).then(function(a){200===a.status&&(a=a.data.databean,r.brandDetail=a,r.brandDetailList=a)},function(a){return!1})}function n(){return q(),i.getModel(s).then(function(a){200===a.status&&(a=a.data.databean,r.modelDetail=a,r.modelDetailList=a)},function(a){return!1})}function o(a){var b=confirm("Are you sure you want to delete ?");return!!b&&i.deleteStock(a).then(function(a){200===a.status&&(a=a.data.databean,toastr.success("Deleted Successfully."))},function(a){return toastr.error(a.message),!1})}function p(a){q(),"supplier"===a?r.getSupplier():"brand"===a?r.getBrand():"model"===a&&r.getModel()}function q(){s={}}var r=this,s={};r.allUsers=[],r.myInterval=5e3,r.noWrapSlides=!1,r.active=0,r.itemsByPage=10;var t=0;r.slides=[{image:"GB/assets/images/carousel-1.jpg",text:["Nice image","Awesome photograph","That is so cool","I love that"],id:t++},{image:"GB/assets/images/carousel-2.jpg",text:["Nice image","Awesome photograph","That is so cool","I love that"],id:t++},{image:"GB/assets/images/carousel-3.jpg",text:["Nice image","Awesome photograph","That is so cool","I love that"],id:t++}],j(),r.getOrders=k,r.getOrders(),e.$on("addOrder",function(a,b){r.orderDetails.push(b.order),r.rowCollection.push(b.order)}),e.$on("supplierOrder",function(a,b){r.supplierDetail.push(b.brand),r.suppDetailCollection.push(b.brand)}),e.$on("brandOrder",function(a,b){r.brandDetail.push(b.brand),r.brandDetailList.push(b.brand)}),e.$on("modelOrder",function(a,b){r.modelDetail.push(b.brand),r.modelDetailList.push(b.brand)}),r.getSupplier=l,r.getBrand=m,r.getModel=n,r.deleteStock=o,r.selectTab=p}angular.module("app.layout").controller("homeCtr",a),a.$inject=["$timeout","$filter","$q","config","$rootScope","$cookies","$scope","$location","authfactory"]}(),function(){function a(a,b,c,d,e,f,g,h,i){var j=this;j.loginForm=function(){return i.login(j.login).then(function(a){200===a.status?(a=a.data.databean,e.isLogin=!0,h.path("/home"),toastr.success("Login Successfully")):toastr.warning("Wrong Username / Password")},function(a){return!1})},j.changePwd=function(){return i.changePwd(j.login).then(function(a){200===a.status&&(a=a.data.databean,toastr.success("Password Changed successfully"))},function(a){return!1})},j.logout=function(){e.isLogin=!1,h.path("/login")}}angular.module("app.layout").controller("loginCtr",a),a.$inject=["$timeout","$filter","$q","config","$rootScope","$cookies","$scope","$location","authfactory"]}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(){return i.saveBrand(p.order).then(function(a){if(200===a.status)return a=a.data.databean,g.$emit("brandOrder",{brand:a}),toastr.success("Brand Added"),g.$emit("cancelModal"),a},function(a){return toastr.error("Something Went Wrong"),!1})}function k(){return i.saveModel(p.order).then(function(a){if(200===a.status)return a=a.data.databean,g.$emit("modelOrder",{model:a}),toastr.success("Model Added"),g.$emit("cancelModal"),a},function(a){return toastr.error("Something Went Wrong"),!1})}function l(){return i.updateStock(p.order).then(function(a){if(200===a.status)return a=a.data.databean,toastr.success("Stock Updated"),g.$emit("cancelModal"),a},function(a){return toastr.error("Something Went Wrong"),!1})}function m(){return i.returnSellOrder(p.order).then(function(a){if(200===a.status)return a=a.data.databean,toastr.success("Stock Updated"),g.$emit("cancelModal"),a},function(a){return toastr.error("Something Went Wrong"),!1})}function n(){return i.getBrand(q).then(function(a){200===a.status&&(a=a.data.databean,p.brandDetail=a)},function(a){return!1})}function o(a){return!!a&&i.changeBrand(a).then(function(a){200===a.status?(a=a.data.databean,p.modelDetail=a,s&&(p.dirtyCheck=!0)):(p.modelDetail=[],toastr.info("No Model Found"))},function(a){return!1})}var p=this;p.order={};var q={},r={},s={};p.dirtyCheck=!1,g.popup1={opened:!1},g.format="dd-MMMM-yyyy",g.altInputFormats=["M!/d!/yyyy"],g.dateOptions={formatYear:"yy",startingDay:1},g.open1=function(){g.popup1.opened=!0},angular.copy(g.modalData,s),angular.copy(g.modalopt,r),s&&r&&("stock"===r.type?(p.order=s,p.order.brand=s.brand.brandId,p.order.model=s.model.modelId,p.order.suppliedBy=s.suppliedBy.supplierId):"supplier"===r.type||"brand"===r.type||"model"===r.type||"return"===r.type&&(p.order=s,p.order.brand=s.brand.brandId,p.order.model=s.model.modelId),p.editMode=!0),p.ok=function(){return i.createOrder(p.order).then(function(a){if(200===a.status)return a=a.data.databean,g.$emit("addOrder",{order:a}),toastr.success("Stock Added"),g.$emit("cancelModal"),a},function(a){return toastr.error("Something Went Wrong"),!1})},p.setSellOrder=function(){return i.setSellOrder(p.order).then(function(a){if(200===a.status)return a=a.data.databean,g.$emit("sellOrder",{order:a}),toastr.success("Order Selled"),g.$emit("cancelModal"),a},function(a){return toastr.error("Something Went Wrong"),!1})},p.saveSupplier=function(){return i.createSupplier(p.order).then(function(a){if(200===a.status)return a=a.data.databean,g.$emit("supplierOrder",{supplier:a}),toastr.success("Suppliyer Added"),g.$emit("cancelModal"),a},function(a){return toastr.error("Something Went Wrong"),!1})},p.saveBrand=j,p.saveModel=k,p.updateStock=l,p.returnItem=m,p.getSuppliers=function(){return i.getSupplierId().then(function(a){if(200===a.status)return a=a.data.databean,p.suppliyers=a,a},function(a){return!1})},p.getSuppliers(),p.getBrand=n,p.getBrand(),p.changeBrand=o,p.changeBrand(p.order.brand),p.cancel=function(){g.$emit("cancelModal")}}angular.module("app.layout").controller("addModalCtr",a),a.$inject=["$timeout","$filter","$q","config","$rootScope","$cookies","$scope","$location","authfactory"]}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(){return i.getChartDetail().then(function(a){200===a.status&&(a=a.data.databean,k.getChartDetail=a,k.createChart(k.getChartDetail))},function(a){return!1})}var k=this;k.activeForm=0,g.popup1={opened:!1},g.format="dd-MMMM-yyyy",g.altInputFormats=["M!/d!/yyyy"],g.dateOptions={formatYear:"yy",startingDay:1},g.open1=function(){g.popup1.opened=!0},g.popup2={opened:!1},g.dateOptions={formatYear:"yy",startingDay:1},g.open2=function(){g.popup2.opened=!0},k.chart=j,k.createChart=function(a){Highcharts.chart("chartDiv",{chart:{type:"column"},title:{text:"Last 30 Days Stock / Sell"},subtitle:{text:"Stock / Sell Count"},xAxis:{categories:a.brands,crosshair:!0},yAxis:{min:0,title:{text:""}},colors:["#419ff1","#b63838"],tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[{name:"Stock",data:a.series.Purchase},{name:"Sell",data:a.series.Sell}]})},k.chart(),k.generateExcel=function(){return i.generateExcel(k.order).then(function(a){200===a.status&&toastr.success("Excel Generated")},function(a){return!1})}}angular.module("app.layout").controller("reviewCtr",a),a.$inject=["$timeout","$filter","$q","config","$rootScope","$cookies","$scope","$location","authfactory"]}(),function(){function a(a,b,c,d,e,f,g,h){function i(){}e.isLogin=!1,i()}angular.module("app.layout").controller("ShellCtr",a),a.$inject=["$timeout","$filter","$q","config","$rootScope","$cookies","$scope","$location"]}();